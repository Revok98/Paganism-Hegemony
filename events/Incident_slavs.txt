namespace = slavic_uprising

country_event = {
	id = slavic_uprising.1
	title = slavic_uprising.1.t
	desc = slavic_uprising.1.d
	picture = HRE_eventPicture

	fire_only_once = yes
	trigger = {
		is_year = 1508
		any_province = {
			is_part_of_hre = yes
			religion = slavic
		}
		is_emperor = yes
	}
	mean_time_to_happen = {
		months = 1
	}

	option = { # incident
		name = slavic_uprising.1.a
		trigger = {
			has_dlc = "Emperor"
		}
		ai_chance = {
			factor = 1
		}
		set_imperial_incident = incident_slavic_nationalism
	}

	option = { #if not emperor
		trigger = {
			NOT = {has_dlc = "Emperor"}
		}
		name = slavic_uprising.1.b
		ai_chance = {
			factor = 1
		}
		country_event = { id = slavic_uprising.2 }
	}
}


country_event = {
	id = slavic_uprising.2
	title = slavic_uprising.2.t
	desc = slavic_uprising.2.d
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = { # we cannot succeed, let them leave
		ai_chance = {
			factor = 1
		}
		name = slavic_uprising.2.a
		add_prestige = -10
		add_imperial_influence = -20
		set_global_flag = accepted_slavs

		every_country = {
			limit = {
				is_emperor = no
				is_part_of_hre = yes
				any_owned_province = {
					OR = {
						religion = slavic
						religion = Illyrian
						religion = tengri_pagan_reformed
					}
				}
			}
			country_event = { id = slavic_uprising.3 }
		}#choice to remain theoi or not
	}

	option = {#forbid them and help the doux to fight them
		ai_chance = {
			factor = 1
		}
		name = slavic_uprising.2.b
		emperor = {
			add_treasury = -1000
		}
		every_country = {
			limit = {
				is_part_of_hre = yes
				any_owned_province = {
					OR = {
						religion = slavic
						religion = Illyrian
						religion = tengri_pagan_reformed
					}
				}
			}
			country_event = { id = slavic_uprising.4 }
		}#choice to remain theoi or not but declarer war on the emperor if they become slavic
	}


	option = { #forbid them and dont help them
		ai_chance = {
			factor = 1
		}
		name = slavic_uprising.2.c
		every_country = {
			limit = {
				is_part_of_hre = yes
				any_owned_province = {
					OR = {
						religion = slavic
						religion = Illyrian
						religion = tengri_pagan_reformed
					}
				}
			}

			country_event = { id = slavic_uprising.5 }
		}#choice to remain theoi or not but declarer war on the emperor if they become slavic
	}
}


country_event = {
	id = slavic_uprising.3
	title = slavic_uprising.3.t
	desc = slavic_uprising.3.d
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = { # remain theoi
		name = slavic_uprising.3.e
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = "slavic_uprising"
			duration = 3650
		}
	}

	option = { #become slavic
		name = slavic_uprising.3.a
		trigger = {
			any_owned_province = {
				religion = slavic
			}
		}
		ai_chance = {
			factor = 1000
		}
		change_religion = slavic
	}

	option = { #become illyrian
		name = slavic_uprising.3.b
		trigger = {
			any_owned_province = {
				religion = Illyrian
			}
		}
		ai_chance = {
			factor = 1000
		}
		change_religion = Illyrian
	}

	option = { #become tengri_pagan_reformed
		name = slavic_uprising.3.c
		trigger = {
			any_owned_province = {
				religion = tengri_pagan_reformed
			}
		}
		ai_chance = {
			factor = 1000
		}
		change_religion = tengri_pagan_reformed
	}
}

country_event = {
	id = slavic_uprising.4
	title = slavic_uprising.4.t
	desc = slavic_uprising.4.d
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = { #remain theoi
		name = slavic_uprising.4.e
		ai_chance = {
			factor = 10
		}
		add_country_modifier = {
			name = "slavic_uprising_imperial_help"
			duration = 3650
		}
	}

	option = { #defy the empire : become slavic
		trigger = {
			name = slavic_uprising.4.a
			any_owned_province = {
				religion = slavic
			}
		}
		ai_chance = {
			factor = 10
		}
		set_global_flag = defy_the_emperor
		change_religion = slavic
		declare_war_with_cb = {
			who = emperor
			casus_belli = cb_crusade
		}
	}

	option = { #defy the empire : become illyrian
		name = slavic_uprising.4.b
		trigger = {
			any_owned_province = {
				religion = Illyrian
			}
		}
		ai_chance = {
			factor = 1
		}
		set_global_flag = defy_the_emperor
		change_religion = Illyrian
		declare_war_with_cb = {
			who = emperor
			casus_belli = cb_crusade
		}
	}
	option = { #become tengri_pagan_reformed
		name = slavic_uprising.4.c
		trigger = {
			any_owned_province = {
				religion = tengri_pagan_reformed
			}
		}
		ai_chance = {
			factor = 1000
		}
		set_global_flag = defy_the_emperor
		change_religion = tengri_pagan_reformed
	}
}


country_event = {
	id = slavic_uprising.5
	title = slavic_uprising.5.t
	desc = slavic_uprising.5.d
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = { #remain theoi
		name = slavic_uprising.5.e
		ai_chance = {
			factor = 1
		}
		add_country_modifier = {
			name = "slavic_uprising"
			duration = 3650
		}
	}

	option = { #defy the empire : become slavic
		name = slavic_uprising.5.a
		trigger = {
			any_owned_province = {
				religion = slavic
			}
		}
		ai_chance = {
			factor = 1000
		}
		set_global_flag = defy_the_emperor
		change_religion = slavic
		declare_war_with_cb = {
			who = emperor
			casus_belli = cb_crusade
		}
	}

	option = { #defy the empire : become illyrian
		name = slavic_uprising.5.b
		trigger = {
			any_owned_province = {
				religion = Illyrian
			}
		}
		ai_chance = {
			factor = 1
		}
		set_global_flag = defy_the_emperor
		change_religion = Illyrian
		declare_war_with_cb = {
			who = emperor
			casus_belli = cb_crusade
		}
	}
	option = { #become tengri_pagan_reformed
		name = slavic_uprising.5.c
		trigger = {
			any_owned_province = {
				religion = tengri_pagan_reformed
			}
		}
		ai_chance = {
			factor = 1000
		}
		set_global_flag = defy_the_emperor
		change_religion = tengri_pagan_reformed
	}
}


country_event = {#defeat of the emperor
	id = slavic_uprising.6
	title = slavic_uprising.6.t
	desc = slavic_uprising.6.d
	picture = HRE_eventPicture

	trigger = {
		has_global_flag = defy_the_emperor
		war_with = emperor
		war_score = 25
	}
	mean_time_to_happen = {
		months = 1
	}

	option = {
		name = slavic_uprising.6.a
		ai_chance = {
			factor = 1
		}
		clr_global_flag = defy_the_emperor
		emperor = {
			add_prestige = -10
			add_imperial_influence = -20
		}
		add_prestige = 20
		add_truce_with = emperor
	}
}

country_event = { #victory_of_the_emperor
	id = slavic_uprising.7
	title = slavic_uprising.7.t
	desc = slavic_uprising.7.d
	picture = HRE_eventPicture

	trigger = {
		has_global_flag = defy_the_emperor
		war_with = emperor
		NOT = {war_score = -25}
	}
	mean_time_to_happen = {
		months = 1
	}

	option = {
		name = slavic_uprising.7.a
		ai_chance = {
			factor = 1
		}
		clr_global_flag = defy_the_emperor
		emperor = {
			country_event = {id = slavic_uprising.8}
		}
		add_prestige = -20
		white_peace = emperor
		add_truce_with = emperor
		change_religion = olympoi
	}
}

country_event = { #victory_of_the_emperor
	id = slavic_uprising.8
	title = slavic_uprising.8.t
	desc = slavic_uprising.8.d
	picture = HRE_eventPicture

	is_triggered_only = yes

	option = {
		name = slavic_uprising.8.a
		ai_chance = {
			factor = 1
		}
		country_event = {id = slavic_uprising.8}
		add_prestige = 10
		add_imperial_influence = 5
	}
}
