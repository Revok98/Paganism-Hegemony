namespace = flavor_spqr
namespace = flavor_ctgspqr

#events 2X are for the monarchy
#events with 3X are for the republic
#events with 1X are non specific

country_event = {#Defenestration
  id = flavor_spqr.1
  title = flavor_spqr.1.t
  desc = flavor_spqr.1.d
  picture = DEFENESTRATION_PRAGUE_eventPicture

  major = yes
  fire_only_once = yes

  trigger = {
    tag = SPQ
    is_year = 1445
  }

  mean_time_to_happen = {
    months = 1
  }

  option = {
    name = flavor_spqr.1.a
    ai_chance = { factor = 90 }
    change_government = republic
    add_government_reform = imperial_roman_curia_reform
    kill_ruler = yes
    add_country_modifier = {
      name = hostile_nobles_spq
      duration = 18200
    }
    if = {
      limit = {
        ai = no
      }
      118 = { pretender_rebels = 1 }
    }
    4732 = { pretender_rebels = 1 }
    custom_tooltip = SPQ_PROV_LEAVE_tt
    hidden_effect = {
      RVN = {
        country_event =  {
          id = flavor_spqr.111
          days = 100
        }
      }
      URB = {
        country_event =  {
          id = flavor_spqr.111
          days = 180
        }
      }
      PIS = {
        country_event =  {
          id = flavor_spqr.111
          days = 70
        }
      }
      SIE = {
        country_event =  {
          id = flavor_spqr.111
          days = 210
        }
      }
      PRA = {
        country_event =  {
          id = flavor_spqr.111
          days = 300
        }
      }
      TUS = {
        country_event =  {
          id = flavor_spqr.111
          days = 130
        }
      }
    }
    set_country_flag = supported_the_senate
  }

  option = {
    name = flavor_spqr.1.b
    ai_chance = { factor = 10 }
    change_adm = -1
    change_dip = -1
    change_mil = -2
    add_country_modifier = {
      name = unrest_stirred_spqr
      duration = -1
    }
    118 = { revolutionary_rebels = 1 }
    add_stability = -1
    custom_tooltip = rep_will_distance_tt
    create_subject = {
      subject_type = roman_province_decen
      subject = RVN
    }
    create_subject = {
      subject_type = roman_province_decen
      subject = SIE
    }
    create_subject = {
      subject_type = roman_province_decen
      subject = PIS
    }
    set_country_flag = supported_the_king
  }
}

country_event = {#The fire of Ostia
  id = flavor_spqr.2
  title = flavor_spqr.2.t
  desc = flavor_spqr.2.d
  picture = REVOLT_HUNGARIAN_eventPicture

  trigger = {
    tag = SPQ
    has_country_flag = supported_the_king
  }

  mean_time_to_happen = {
    months = 20
  }

  option = {#Burn the port
    name = flavor_spqr.2.a
    ai_chance = {
      factor = 70
    }
    add_legitimacy = -10
    118 = {
      add_center_of_trade_level = -1
      add_devastation = 25
    }
    random_list = {
      95 = {
        custom_tooltip = senators_dead_tt
        hidden_effect = {
          set_country_flag = senators_dead_spqr
        }
      }
      5 = {
        custom_tooltip = senators_fled_tt
        hidden_effect = {
          set_country_flag = senators_fled_spqr
          #CTG = { country_event = { flavor_ctgspqr.1 } days = 539 }
        }
      }
    }
  }
  option = {#Send in the army
    name = flavor_spqr.2.b
    ai_chance = {
      factor = 25
    }
    add_treasury = -30
    add_manpower = -0.2
    118 = {
      add_devastation = 10
    }
    random_list = {
      70 = {
        custom_tooltip = senators_dead_tt
        hidden_effect = {
          set_country_flag = senators_dead_spqr
        }
      }
      30 = {
        custom_tooltip = senators_fled_tt
        hidden_effect = {
          set_country_flag = senators_fled_spqr
          #CTG = { country_event = { flavor_ctgspqr.1 } days = 539 }
        }
      }
    }
  }
  option = {#Let them go
    name = flavor_spqr.2.c
    ai_chance = {
      factor = 5
    }
    add_prestige = -10
    random_list = {
      10 = {
        custom_tooltip = senators_dead_tt
        hidden_effect = {
          set_country_flag = senators_dead_spqr
        }
      }
      90 = {
        custom_tooltip = senators_fled_tt
        hidden_effect = {
          set_country_flag = senators_fled_spqr
          #CTG = { country_event = { flavor_ctgspqr.1 } days = 539 }
        }
      }
    }
  }
}

country_event = {#Avoiding a famine
  id = flavor_spqr.12
  title = flavor_spqr.12.t
  desc = flavor_spqr.12.d
  picture = FAMINE_eventPicture

  trigger = {
    tag = SPQ
    is_year = 1446
  }

  mean_time_to_happen = {
    months = 12
  }

  option = {#Divert the new recruits to the fields
    name = flavor_spqr.12.a
    ai_chance = { factor = 50 }
    add_adm_power = -75
    add_yearly_manpower = -8
    add_country_modifier = {
      name = divert_recruits_spq
      duration = 3650
    }
    custom_tooltip = effort_bear_fruit_tt
    hidden_effect = {
      country_event = {
        id = flavor_spqr.121
        days = 5263
      }
    }
  }
  option = {#Promote available lands
    name = flavor_spqr.12.b
    ai_chance = { factor = 30 }
    add_adm_power = -125
    add_dip_power = -75
    add_years_of_income = -1
    every_neighbor_country = {
      add_opinion = {
        who = ROOT
        modifier = opinion_draining_people_spq
      }
    }
    custom_tooltip = effort_bear_fruit_tt
    hidden_effect = {
      country_event = {
        id = flavor_spqr.121
        days = 5802
      }
    }
  }
  option = {#Buy grains from overseas
    name = flavor_spqr.12.c
    ai_chance = { factor = 15 }
    add_years_of_income = -3
    add_dip_power = -50
    add_mercantilism = -3
    custom_tooltip = effort_bear_fruit_tt
    hidden_effect = {
      country_event = {
        id = flavor_spqr.121
        days = 7300
      }
    }
  }
  option = {#Starvation cannot be avoided
    name = flavor_spqr.12.e
    ai_chance = { factor = 5 }
    add_stability = -1
    add_republican_tradition = -15
    add_country_modifier = {
      name = starvation
      duration = 4380
    }
    hidden_effect = {
      country_event = {
        id = flavor_spqr.121
        days = 10950
      }
    }
  }
}

country_event = {
  id = flavor_spqr.121
  title = flavor_spqr.121.t
  desc = flavor_spqr.121.d
  picture = FARMING_eventPicture

  is_triggered_only = yes

  option = {
    name = flavor_spqr.121.a
    custom_tooltip = depop_change_tt
    hidden_effect = {
      remove_country_modifier = no_men_left_spq
      add_country_modifier = {
        name = slight_depopulation_spq
        duration = -1
      }
    }
  }
}
#Diplomatic events with the provinces

country_event = {#Event for the provinces
  id = flavor_spqr.111
  title = flavor_spqr.111.t
  desc = flavor_spqr.111.d
  picture = NOBLE_ESTATE_TAKE_OVER_eventPicture

  is_triggered_only = yes

  option = {#Independence
    name = flavor_spqr.111.a
    ai_chance = {
      factor = 60
      modifier = {
        factor = 0
        tag = PRA
      }
      modifier = {
        factor = 5
        OR = {
          tag = URB
          tag = SIE
        }
      }
    }
    grant_independence = yes
    add_truce_with = SPQ
    SPQ = {
      country_event = {
        id = flavor_spqr.1111
      }
    }
  }

  option = {#Autonomy
    name = flavor_spqr.111.b
    ai_chance = {
      factor = 15
      modifier = {
        factor = 5
        tag = PRA
      }
      modifier = {
        factor = 70
        OR = {
          tag = URB
          tag = SIE
        }
      }
      modifier = {
        factor = 0
        has_country_flag = postponed_choice_spqr_province
      }
    }
    hidden_effect = {
      set_country_flag = postponed_choice_spqr_province
      country_event = {
        id = flavor_spqr.111
        days = 10950
      }
    }
    add_truce_with = SPQ
    SPQ = {
      create_subject = {
        subject_type = roman_province_decen
        subject = ROOT
      }
      country_event = {
        id = flavor_spqr.1112
      }
    }
  }

  option = {#Loyal
    name = flavor_spqr.111.c
    ai_chance = {
      factor = 10
      modifier = {
        factor = 100
        tag = PRA
      }
      modifier = {
        factor = 0
        OR = {
          tag = PIS
          tag = RVN
          tag = TUS
        }
      }
      modifier = {
        factor = 60
        has_country_flag = postponed_choice_spqr_province
        SPQ = {
          stability = 1
          NOT = { inflation = 5 }
          prestige = 20
          NOT = { average_unrest = 0 }
          OR = {
            NOT = { has_country_modifier = massive_indebtment_spq }
            NOT = { has_country_modifier = no_men_left_spq }
            NOT = { has_country_modifier = wounds_of_bloody_war_spq }
          }
        }
      }
    }
    add_truce_with = SPQ
  }

  option = {#coming back
    name = flavor_spqr.111.e
    ai_chance = {
      factor = 0
      modifier = {
        factor = 100
        has_country_flag = postponed_choice_spqr_province
        SPQ = {
          stability = 1
          NOT = { inflation = 5 }
          prestige = 20
          NOT = { average_unrest = 0 }
          OR = {
            NOT = { has_country_modifier = massive_indebtment_spq }
            NOT = { has_country_modifier = no_men_left_spq }
            NOT = { has_country_modifier = wounds_of_bloody_war_spq }
          }
        }
      }
    }
    SPQ = {
      create_subject = {
        subject_type = roman_province_cen
        subject = ROOT
      }
      country_event = {
        id = flavor_spqr.1113
      }
    }
  }
}

country_event = {#Independence
  id = flavor_spqr.1111
  title = flavor_spqr.1111.t
  desc = flavor_spqr.1111.d
  picture = NOBLE_ESTATE_TAKE_OVER_eventPicture

  is_triggered_only = yes

  option = {
    name = flavor_spqr.1111.a
    add_prestige = -15
  }
}

country_event = {#Autonomy
  id = flavor_spqr.1112
  title = flavor_spqr.1112.t
  desc = flavor_spqr.1112.d
  picture = NOBLE_ESTATE_TAKE_OVER_eventPicture

  is_triggered_only = yes

  option = {
    name = flavor_spqr.1112.a
    add_prestige = -5
  }
}

country_event = {#Coming back
  id = flavor_spqr.1113
  title = flavor_spqr.1113.t
  desc = flavor_spqr.1113.d
  picture = NOBLE_ESTATE_TAKE_OVER_eventPicture

  is_triggered_only = yes

  option = {
    name = flavor_spqr.1113.a
    add_prestige = 15
  }
}

#Events involving Carthago
country_event = {
  id = flavor_ctgspqr.1
  title = flavor_ctgspqr.1.t
  desc = flavor_ctgspqr.1.d
  picture = CHURCH_ESTATE_1_eventPicture

  is_triggered_only = yes

  option = {#Republic help them
    name = flavor_ctgspqr.1.a
    trigger = {
      government = republic
    }
    ai_chance = {
      factor = 60
      modifier = {
        factor = 70
        has_reform = carthaginian_republic_centralize
      }
    }
    add_republican_tradition = 20
    add_prestige = 10
    add_years_of_income = -1
    add_manpower = -2
    2986 = {
      add_province_modifier = {
        name = roman_senators_mustering_forces
        duration = -1
      }
    }
    hidden_effect = {
      set_country_flag = helped_roman_senators
      SPQ = {
        country_event = { id = flavor_ctgspqr.111 }
      }
    }
  }
  option = {#Republic shelter them
    name = flavor_ctgspqr.1.b
    trigger = {
      government = republic
    }
    ai_chance = {
      factor = 30
      modifier = {
        factor = 50
        has_reform = carthaginian_republic_decentralize
      }
    }
    add_republican_tradition = 10
    add_prestige = 10
    add_country_modifier = {
      name = sheltering_roman_senators_ctg
      duration = 7300
    }
    hidden_effect = {
      set_country_flag = sheltered_roman_senators
      SPQ = {
        country_event = { id = flavor_ctgspqr.111 }
      }
    }
  }
  option = {#Republic ignore them
    name = flavor_ctgspqr.1.c
    trigger = {
      government = republic
    }
    ai_chance = {
      factor = 10
      modifier = {
        factor = 20
        NOT = { stability = 0 }
      }
      modifier = {
        factor = 20
        NOT = { prestige = 0 }
      }
      modifier = {
        factor = 20
        NOT = { republican_tradition = 50 }
      }
    }
    hidden_effect = {
      set_country_flag = ignored_roman_senators
      SPQ = {
        country_event = { id = flavor_ctgspqr.111 }
      }
    }
  }
  option = {#Monarchy kill them
    name = flavor_ctgspqr.1.e
    trigger = {
      government = monarchy
    }
    add_legitimacy = 10
    add_prestige = -10
    ai_chance = {
      factor = 30
      modifier = {
        factor = 70
        ruler_has_personality = cruel_personality
      }
    }
    reverse_add_opinion = {
      who = SPQ
      modifier = Friendliness
    }
  }
  option = {#Monarchy imprison them
    name = flavor_ctgspqr.1.f
    trigger = {
      government = monarchy
    }
    add_prestige = 10
    add_legitimacy = 10
    ai_chance = {
      factor = 60
    }
    hidden_effect = {
      set_country_flag = imprisoned_roman_senators
      SPQ = {
        country_event = { id = flavor_ctgspqr.111 }
      }
    }
  }
  option = {#Monarchy ignore them
    name = flavor_ctgspqr.1.g
    trigger = {
      government = monarchy
    }
    add_legitimacy = -5
    add_prestige = -10
    ai_chance = {
      factor = 10
      modifier = {
        factor = 20
        NOT = { stability = 0 }
      }
      modifier = {
        factor = 20
        NOT = { prestige = 0 }
      }
    }
    hidden_effect = {
      set_country_flag = ignored_roman_senators
      SPQ = {
        country_event = { id = flavor_ctgspqr.111 }
      }
    }
  }
}

country_event = {#The senators in Carthago
  id = flavor_ctgspqr.111
  title = flavor_ctgspqr.111.t
  desc = flavor_ctgspqr.111.d
  picture = CHURCH_ESTATE_1_eventPicture

  is_triggered_only = yes

  #trucbidule avec des trigger CTG = { has_country_flag = fromage }
}

#other events demanding for cash and forces with a pulse
#events asking to retake roma if sheltered
